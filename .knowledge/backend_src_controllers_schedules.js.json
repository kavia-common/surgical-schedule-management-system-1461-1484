{"is_source_file": true, "format": "JavaScript", "description": "This file defines the SchedulesController class, which provides HTTP request handlers for managing schedules in a scheduling system. It includes methods for listing, creating, retrieving, updating, deleting schedules, as well as detecting conflicts and suggesting available slots. It relies on external services for core logic.", "external_files": ["../services/scheduleService", "../services/conflictService"], "external_methods": ["listSchedules", "createSchedule", "getSchedule", "updateSchedule", "deleteSchedule", "detectConflicts", "suggestNextAvailableSlot"], "published": ["SchedulesController"], "classes": [{"name": "SchedulesController", "description": "Controller class providing API endpoints for schedule management operations."}], "methods": [{"name": "list(req, res)", "description": "Handles listing of schedules with optional filters for status and date range.", "scope": "SchedulesController", "scopeKind": "class"}, {"name": "create(req, res)", "description": "Creates a new schedule, with optional conflict detection based on query parameter.", "scope": "SchedulesController", "scopeKind": "class"}, {"name": "get", "description": "Retrieves a schedule by its identifier."}, {"name": "update", "description": "Updates an existing schedule, with optional conflict detection."}, {"name": "delete", "description": "Deletes a schedule by its identifier."}, {"name": "conflicts", "description": "Performs a dry run to detect conflicts for a provided schedule payload."}, {"name": "suggest", "description": "Provides a suggested next available time slot for scheduling."}], "calls": ["listSchedules", "createSchedule", "getSchedule", "updateSchedule", "deleteSchedule", "detectConflicts", "suggestNextAvailableSlot"], "search-terms": ["SchedulesController", "schedules.js", "schedule management", "conflict detection", "scheduling API", "REST controller"], "state": 2, "file_id": 21, "knowledge_revision": 43, "git_revision": "", "ctags": [{"_type": "tag", "name": "SchedulesController", "path": "/home/kavia/workspace/code-generation/surgical-schedule-management-system-1461-1484/backend/src/controllers/schedules.js", "pattern": "/^class SchedulesController {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "allowConflicts", "path": "/home/kavia/workspace/code-generation/surgical-schedule-management-system-1461-1484/backend/src/controllers/schedules.js", "pattern": "/^    const allowConflicts = String(req.query.allowConflicts || '').toLowerCase() === 'true';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "conflicts", "path": "/home/kavia/workspace/code-generation/surgical-schedule-management-system-1461-1484/backend/src/controllers/schedules.js", "pattern": "/^    const conflicts = detectConflicts(req.body || {});$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "create", "path": "/home/kavia/workspace/code-generation/surgical-schedule-management-system-1461-1484/backend/src/controllers/schedules.js", "pattern": "/^  create(req, res) {$/", "language": "JavaScript", "kind": "method", "signature": "(req, res)", "scope": "SchedulesController", "scopeKind": "class"}, {"_type": "tag", "name": "duration", "path": "/home/kavia/workspace/code-generation/surgical-schedule-management-system-1461-1484/backend/src/controllers/schedules.js", "pattern": "/^    const duration = Number(req.query.durationMinutes || 60);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "ev", "path": "/home/kavia/workspace/code-generation/surgical-schedule-management-system-1461-1484/backend/src/controllers/schedules.js", "pattern": "/^    const ev = getSchedule(req.params.id);$/", "language": "JavaScript", "kind": "field", "scope": "SchedulesController", "scopeKind": "class"}, {"_type": "tag", "name": "ev", "path": "/home/kavia/workspace/code-generation/surgical-schedule-management-system-1461-1484/backend/src/controllers/schedules.js", "pattern": "/^    if (!ev) return res.status(404).json({ error: 'Not found' });$/", "language": "JavaScript", "kind": "field", "scope": "SchedulesController", "scopeKind": "class"}, {"_type": "tag", "name": "exports", "path": "/home/kavia/workspace/code-generation/surgical-schedule-management-system-1461-1484/backend/src/controllers/schedules.js", "pattern": "/^module.exports = new SchedulesController();$/", "language": "JavaScript", "kind": "variable", "scope": "module", "scopeKind": "class"}, {"_type": "tag", "name": "horizon", "path": "/home/kavia/workspace/code-generation/surgical-schedule-management-system-1461-1484/backend/src/controllers/schedules.js", "pattern": "/^    const horizon = Number(req.query.horizonMinutes || 8 * 60);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/surgical-schedule-management-system-1461-1484/backend/src/controllers/schedules.js", "pattern": "/^  list(req, res) {$/", "language": "JavaScript", "kind": "method", "signature": "(req, res)", "scope": "SchedulesController", "scopeKind": "class"}, {"_type": "tag", "name": "ok", "path": "/home/kavia/workspace/code-generation/surgical-schedule-management-system-1461-1484/backend/src/controllers/schedules.js", "pattern": "/^    const ok = deleteSchedule(req.params.id);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "req", "path": "/home/kavia/workspace/code-generation/surgical-schedule-management-system-1461-1484/backend/src/controllers/schedules.js", "pattern": "/^  get(req, res) {$/", "language": "JavaScript", "kind": "field", "scope": "SchedulesController", "scopeKind": "class"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/surgical-schedule-management-system-1461-1484/backend/src/controllers/schedules.js", "pattern": "/^    if (!ev) return res.status(404).json({ error: 'Not found' });$/", "language": "JavaScript", "kind": "field", "scope": "SchedulesController", "scopeKind": "class"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/surgical-schedule-management-system-1461-1484/backend/src/controllers/schedules.js", "pattern": "/^    return res.json({ data: ev });$/", "language": "JavaScript", "kind": "field", "scope": "SchedulesController", "scopeKind": "class"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/surgical-schedule-management-system-1461-1484/backend/src/controllers/schedules.js", "pattern": "/^  get(req, res) {$/", "language": "JavaScript", "kind": "field", "scope": "SchedulesController", "scopeKind": "class"}, {"_type": "tag", "name": "result", "path": "/home/kavia/workspace/code-generation/surgical-schedule-management-system-1461-1484/backend/src/controllers/schedules.js", "pattern": "/^      const result = updateSchedule(req.params.id, req.body, { allowConflicts });$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "suggestion", "path": "/home/kavia/workspace/code-generation/surgical-schedule-management-system-1461-1484/backend/src/controllers/schedules.js", "pattern": "/^    const suggestion = suggestNextAvailableSlot(req.body || {}, duration, horizon);$/", "language": "JavaScript", "kind": "constant"}], "hash": "acc53af7c3fc7b7e5dbf881a65677d14", "format-version": 4, "code-base-name": "backend", "filename": "backend/src/controllers/schedules.js", "fields": [{"name": "const ev = getSchedule(req.params.id);", "scope": "SchedulesController", "scopeKind": "class", "description": "unavailable"}, {"name": "if (!ev) return res.status(404).json({ error: 'Not found' });", "scope": "SchedulesController", "scopeKind": "class", "description": "unavailable"}, {"name": "module.exports = new SchedulesController();", "scope": "module", "scopeKind": "class", "description": "unavailable"}, {"name": "get(req, res) {", "scope": "SchedulesController", "scopeKind": "class", "description": "unavailable"}, {"name": "return res.json({ data: ev });", "scope": "SchedulesController", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"43": ""}]}